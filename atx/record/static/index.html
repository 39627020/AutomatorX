<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/jquery-ui-smoothness.css">
    <link rel="stylesheet" href="css/index.css">
  </head>
  <body class="wrapper">
    <div id="toolbar" class="toolbar" v-bind:style="{'display':visible?'block':'none'}">
      <div class="tool" v-for="t in tools">
        <button type="button" @click="click($key)">
          <img v-bind:src="t.icon" alt="{{$key}}" />
        </button>
      </div>
    </div>
    <div class="wrapper" id="container">
      <div class="left-panel">
        <div>
          <ul class="nav clear-fix">
            <li><button @click="toggleToolbar">ToggleToobar</button></li>
            <li><button @click="saveCase">Save</button></li>
            <li><button>Run</button></li>
            <li>Current Frame: {{current+1}}/{{total_frames}}</li>
          </ul>
        </div>
        <div>
          <!-- need to scroll -->
          <ul>
            <li v-for="idx in total_frames">
              <div is="frame" v-bind:idx="idx" v-bind:scale="scale" v-bind></div>
            </li>
          </ul>
        </div>
      </div>
      <div class="right-panel">
        <canvas id="canvas" width="300" height="300"></canvas>
        <div is="slider" min="1" v-bind:max="total_frames" v-bind:value.sync="current"></div>
      </div>
    </div>
    <script type="x/template" id="v-slider-template">
      <div class="v-slider" v-bind:style="{'height': barsize+'px'}" @mousedown="startDrag" @mousemove="onDrag" @mouseup="stopDrag" @mouseleave="stopDrag">
        <div class="v-slider-bar" v-bind:style="sliderbarstyle"></div>
        <div class="v-slider-point" v-bind:style="sliderpointstyle"></div>
      </div>
    </script>
    <script type="x/template" id="frame-template">
      <div class="action clear-fix" v-bind:class="frameclass" @click="showMe">
        <div class="left">
          <img v-bind:src="icon"/>
          <b>{{action | camel}}</b>
          <span v-if="(action=='keyevent')">{{key}}</span>
          <template v-if="has_select">
            <select v-model="selected">
              <option v-for="opt in options" value="{{$key}}">{{opt}}</option>
            </select>
            <label>Selected: {{selected}}</label>
          </template>
          <template v-if="has_image">
            <div class="chop" v-bind:style="chopstyle"></div>
            <label>({{imgbound.width}}x{{imgbound.height}})@({{imgbound.left}}, {{imgbound.top}})</label>
          </template>
          <span v-if="has_point">({{point.left}}, {{point.top}})</span>
        </div>
        <div class="right">
          <button class="skip" @click="skip"></button>
        </div>
        <div class="uioverlap" v-bind:style="overlapstyle">
          <template v-if="has_select">
            <div class="full" @click="selectUi">
              <div class="uibox" v-bind:style="uiboxstyle"></div>
            </div>
          </template>
          <template v-if="has_point">
            <div class="full" @click="changePoint">
              <div class="point" v-bind:style="pointstyle"></div>
            </div>
          </template>
          <template v-if="has_image">
            <div class="full" @mousedown="startRect" @mouseup="stopRect" @mouseout="outRect" @mousemove="drawRect">
              <div class="rect" v-bind:style="rectstyle">
                <div class="resizer" @mousedown="startResize"></div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </script>
    <script type="text/javascript" src="js/jquery-3.0.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/vue.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
      $(document).keydown(function(event) {
        switch (event.keyCode) {
          case 37: //left
            vm.prevFrame();
            return false;
          case 39: //right
            vm.nextFrame();
            return false;
        }
      });

      // $(document).bind('mousewheel', function(event){
      //   var delta = event.originalEvent.wheelDelta;
      //   if (delta > 0) {
      //     vm.prevFrame();
      //   } else {
      //     vm.nextFrame();
      //   }
      // });

    </script>
  </body>
</html>
